
task compile << {
    println "compiling..."
    test.ext["numTests"] = ( System.currentTimeMillis() % 4 ) + 1
} 

task test(dependsOn: compile) << {
    println "testing..." 
    
    echo(test.ext["numTests"])
}

// define a function
void echo(def n)  {
    n.times { i ->
        if (i % 2 == 0) {
            println "test #${i}"
        } else {
            println "TEST #${i}"
        }
    } 
}
